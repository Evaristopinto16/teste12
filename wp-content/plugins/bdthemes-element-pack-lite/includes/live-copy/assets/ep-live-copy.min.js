!function(e,t,n,o){"use strict";var i={init:function(e){i.globalVars(),i.loadxdLocalStorage(),i.loadContextMenuGroupsHooks()},setElementId:function(e){return e.forEach((function(e){e.id=elementorCommon.helpers.getUniqueId(),0<e.elements.length&&i.setElementId(e.elements)})),e},globalVars:function(t){e.lc_ajax_url=bdt_ep_live_copy.ajax_url,e.lc_ajax_nonce=bdt_ep_live_copy.nonce,e.lc_key=bdt_ep_live_copy.magic_key},loadxdLocalStorage:function(){epLiveCopyLocalStorage.init({iframeUrl:"https://elementpack.pro/eptools/magic/index.html",initCallback:function(){}})},loadContextMenuGroupsHooks:function(){elementor.hooks.addFilter("elements/container/contextMenuGroups",(function(e,t){return i.prepareMenuItem(e,t)})),elementor.hooks.addFilter("elements/section/contextMenuGroups",(function(e,t){return i.prepareMenuItem(e,t)})),elementor.hooks.addFilter("elements/widget/contextMenuGroups",(function(e,t){return i.prepareMenuItem(e,t)})),elementor.hooks.addFilter("elements/column/contextMenuGroups",(function(e,t){return i.prepareMenuItem(e,t)}))},prepareMenuItem:function(e,t){var n=_.findIndex(e,(function(e){return"clipboard"===e.name}));return e.splice(n+1,0,{name:"bdt-ep-live-copy-paste",actions:[{name:"ep-live-copy",title:"Live Copy",icon:"bdt-wi-element-pack",callback:function(){i.liveCopy(t)}},{name:"ep-live-paste",title:"Live Paste",icon:"bdt-wi-element-pack",callback:function(){i.livePaste(t)}}]}),e},liveCopy:function(e){var t={elType:e.model.attributes.elType,eletype:e.model.get("widgetType"),modelJson:e.model.toJSON()};const n={};n[t.elType]=t,epLiveCopyLocalStorage.setItem("magic_copy_data",JSON.stringify(n))},livePaste:function(e){epLiveCopyLocalStorage.getItem("magic_copy_data",(function(t){const o=e.model.get("elType"),l=JSON.parse(t.value);var a,r,c,p=l[Object.keys(l)[0]];void 0===p.modelJson?(a=p.elType,r=p):(a=p.modelJson.elType,r=p.modelJson),c=JSON.stringify(r);const s=/\.(jpg|png|jpeg|gif|svg|webp)/gi.test(c),d={elType:a,settings:r.settings};var m=null,u={index:0};if("container"==a||"section"==a)d.elements=i.setElementId(r.elements),m=elementor.getPreviewContainer();else if("column"==a)if(d.elements=i.setElementId(r.elements),"container"===o||"section"===o)m=e.getContainer();else if("column"===o)m=e.getContainer().parent,u.index=e.getOption("_index")+1;else{if("widget"!==o)return void console.log("not match Live Copy ElType");m=e.getContainer().parent.parent,u.index=e.getContainer().parent.view.getOption("_index")+1}else if("widget"==a)if(d.widgetType=p.eletype,m=e.getContainer(),"container"===o)m=e.getContainer();else if("section"===o)m=e.children.findByIndex(0).getContainer();else if("column"===o)m=e.getContainer();else{if("widget"!==o)return void console.log("not match Live Copy ElType");m=e.getContainer().parent,u.index=e.getOption("_index")+1}var g=$e.run("document/elements/create",{model:d,container:m,options:u});s&&n.ajax({url:lc_ajax_url,method:"POST",data:{action:"ep_elementor_import_live_copy_assets_files",data:c,security:lc_ajax_nonce},beforeSend:function(){g.view.$el.append('<div id="bdt-live-copy-importing-images-loader">Importing Images..</div>')}}).done((function(e){if(e.success){const t=e.data[0];d.elType=t.elType,d.settings=t.settings,"widget"===t.elType?d.widgetType=t.widgetType:d.elements=t.elements,setTimeout((function(){$e.run("document/elements/delete",{container:g}),$e.run("document/elements/create",{model:d,container:m,options:u})}),800),n("#bdt-live-copy-importing-images-loader").remove()}}))}))}};i.init()}(window,document,jQuery,epLiveCopyLocalStorage);